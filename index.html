<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>店小二不二的博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="用于个人的学习总结">
<meta property="og:type" content="website">
<meta property="og:title" content="店小二不二的博客">
<meta property="og:url" content="https://mcfly001.github.io/index.html">
<meta property="og:site_name" content="店小二不二的博客">
<meta property="og:description" content="用于个人的学习总结">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="店小二不二的博客">
<meta name="twitter:description" content="用于个人的学习总结">
  
  
    <link rel="icon" href="/img/favicon.png">
  
  
      <link rel="stylesheet" href="//cdn.bootcss.com/animate.css/3.5.0/animate.min.css">
  
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/font-awesome/css/font-awesome.min.css">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  
    
    
  
  
      <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  
  <!-- 加载特效 -->
    <script src="/js/pace.js"></script>
    <link href="/css/pace/pace-theme-flash.css" rel="stylesheet" />
  <script>
      var yiliaConfig = {
          rootUrl: '/',
          fancybox: true,
          animate: true,
          isHome: true,
          isPost: false,
          isArchive: false,
          isTag: false,
          isCategory: false,
          open_in_new: false
      }
  </script>
</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <a href="/" class="profilepic">
            
            <img lazy-src="/img/head.JPG" class="js-avatar">
            
        </a>

        <hgroup>
          <h1 class="header-author"><a href="/" title="Hi Mate">店小二不二</a></h1>
        </hgroup>

        
        
        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        <div class="icon-wrap icon-link hide" data-idx="2">
                            <div class="loopback_l"></div>
                            <div class="loopback_r"></div>
                        </div>
                        
                        
                        <div class="icon-wrap icon-me hide" data-idx="3">
                            <div class="user"></div>
                            <div class="shoulder"></div>
                        </div>
                        
                    </div>
                    
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>菜单</li>
                        
                        
                        <li>友情链接</li>
                        
                        
                        <li>关于我</li>
                        
                    </ul>
                </div>
            </div>
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/categories/html">html</a></li>
                        
                            <li><a href="/categories/css">css</a></li>
                        
                            <li><a href="/categories/javascript">javascript</a></li>
                        
                            <li><a href="/categories/build">构建工具</a></li>
                        
                            <li><a href="/categories/versioncontrol">版本控制器</a></li>
                        
                            <li><a href="/categories/regexp">正则表达式</a></li>
                        
                            <li><a href="/categories/other">其他</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fl mail" target="_blank" href="/867269369@qq.com" title="mail">mail</a>
                            
                                <a class="fl github" target="_blank" href="https://github.com/mcfly001" title="github">github</a>
                            
                                <a class="fl zhihu" target="_blank" href="https://www.zhihu.com/people/qunxing7/activities" title="zhihu">zhihu</a>
                            
                                <a class="fl weibo" target="_blank" href="http://weibo.com/3273899860/profile" title="weibo">weibo</a>
                            
                                <a class="fl google" target="_blank" href="#" title="google">google</a>
                            
                                <a class="fl twitter" target="_blank" href="#" title="twitter">twitter</a>
                            
                                <a class="fl linkedin" target="_blank" href="#" title="linkedin">linkedin</a>
                            
                        </ul>
                    </nav>
                </section>
                
                
                <section class="switch-part switch-part2">
                    <div id="js-friends">
                    
                      <a target="_blank" class="main-nav-link switch-friends-link" href="http://zyj.github.io/">http://zyj.github.io/</a>
                    
                    </div>
                </section>
                

                
                
                <section class="switch-part switch-part3">
                
                    <div id="js-aboutme">爱旅行、喜欢琢磨点有趣的小玩意</div>
                </section>
                
            </div>
        </div>
    </header>                
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="Me">店小二不二</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                
                    <img lazy-src="/img/head.JPG" class="js-avatar">
                
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="Me">店小二不二</a></h1>
            </hgroup>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/categories/html">html</a></li>
                
                    <li><a href="/categories/css">css</a></li>
                
                    <li><a href="/categories/javascript">javascript</a></li>
                
                    <li><a href="/categories/build">构建工具</a></li>
                
                    <li><a href="/categories/versioncontrol">版本控制器</a></li>
                
                    <li><a href="/categories/regexp">正则表达式</a></li>
                
                    <li><a href="/categories/other">其他</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                <div class="social">
                    
                        <a class="mail"  href="/867269369@qq.com" title="mail">mail</a>
                    
                        <a class="github"  href="https://github.com/mcfly001" title="github">github</a>
                    
                        <a class="zhihu"  href="https://www.zhihu.com/people/qunxing7/activities" title="zhihu">zhihu</a>
                    
                        <a class="weibo"  href="http://weibo.com/3273899860/profile" title="weibo">weibo</a>
                    
                        <a class="google"  href="#" title="google">google</a>
                    
                        <a class="twitter"  href="#" title="twitter">twitter</a>
                    
                        <a class="linkedin"  href="#" title="linkedin">linkedin</a>
                    
                </div>
            </nav>
        </header>                
    </div>
</nav>
      <div class="body-wrap">
  
    <article id="post-阿里云mongodb 搭建" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2018/09/12/阿里云mongodb 搭建/" class="article-date">
      <time datetime="2018-09-12T04:53:37.000Z" itemprop="datePublished">2018-09-12</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/09/12/阿里云mongodb 搭建/">阿里云搭建mongodb</a>
    </h1>
  

      </header>
      
    
    
    <div class="article-entry" itemprop="articleBody"  style="display: none">
    
      
          
        <h3 id="第一步：新建mongodb-org-3-4-repo文件"><a href="#第一步：新建mongodb-org-3-4-repo文件" class="headerlink" title="第一步：新建mongodb-org-3.4.repo文件"></a>第一步：新建mongodb-org-3.4.repo文件</h3><figure class="highlight makefile"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">vi /etc/yum.repos.d/mongodb-org-3.4.repo</div><div class="line"></div><div class="line">// 插入内容</div><div class="line"></div><div class="line">[mogodb-org]</div><div class="line"></div><div class="line">name=MongoDB Repository</div><div class="line"></div><div class="line">baseurl=http://mirrors.aliyun.com/mongodb/yum/redhat/7Server/mongodb-org/3.4/x86_64/</div><div class="line"></div><div class="line">gpgcheck=0</div><div class="line"></div><div class="line">enabled=1</div></pre></td></tr></table></figure>
<h3 id="第二步：安装mongodb"><a href="#第二步：安装mongodb" class="headerlink" title="第二步：安装mongodb"></a>第二步：安装mongodb</h3><figure class="highlight cmake"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">yum <span class="keyword">install</span> -y mongodb-org</div></pre></td></tr></table></figure>
<h4 id="第三步：修改-etc-mongod-conf"><a href="#第三步：修改-etc-mongod-conf" class="headerlink" title="第三步：修改/etc/mongod.conf"></a>第三步：修改/etc/mongod.conf</h4><figure class="highlight x86asm"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">// 将<span class="number">127.0</span><span class="meta">.0</span><span class="meta">.1</span> 改为 <span class="number">0.0</span><span class="meta">.0</span><span class="meta">.0</span> 服务器上绑定的地址只能是<span class="number">0.0</span><span class="meta">.0</span><span class="meta">.0</span></div><div class="line">// 将port <span class="number">27017</span> 改为 <span class="number">3333</span></div></pre></td></tr></table></figure>
<h3 id="第四步-重新启动mongodb"><a href="#第四步-重新启动mongodb" class="headerlink" title="第四步 重新启动mongodb"></a>第四步 重新启动mongodb</h3><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">service mongod restart</span></div></pre></td></tr></table></figure>
<h3 id="第五步-链接数据库"><a href="#第五步-链接数据库" class="headerlink" title="第五步 链接数据库"></a>第五步 链接数据库</h3><figure class="highlight ada"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mongo <span class="comment">--host &lt;服务器ip&gt;:3333</span></div></pre></td></tr></table></figure>
<h3 id="关闭数据库"><a href="#关闭数据库" class="headerlink" title="关闭数据库"></a>关闭数据库</h3><p>mongo<br>use admin<br>db.shutdownServer()</p>
<h3 id="删除mongodb"><a href="#删除mongodb" class="headerlink" title="删除mongodb"></a>删除mongodb</h3><p>sudo yum erase $(rpm -qa | grep mongodb-org)<br>sudo rm -r /var/log/mongodb（日志）<br>sudo rm -r /var/lib/mongo（数据）</p>
<h3 id="停止mongod服务"><a href="#停止mongod服务" class="headerlink" title="停止mongod服务"></a>停止mongod服务</h3><p>sudo service mongod stop</p>

      
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/build/">build</a>
    </div>


      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-服务器上搭建node环境" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2018/09/12/服务器上搭建node环境/" class="article-date">
      <time datetime="2018-09-12T03:53:37.000Z" itemprop="datePublished">2018-09-12</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/09/12/服务器上搭建node环境/">阿里云搭建node环境</a>
    </h1>
  

      </header>
      
    
    
    <div class="article-entry" itemprop="articleBody"  style="display: none">
    
      
          
        <h3 id="安装git"><a href="#安装git" class="headerlink" title="安装git"></a>安装git</h3><figure class="highlight cmake"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">yum <span class="keyword">install</span> git</div></pre></td></tr></table></figure>
<h3 id="安装nvm"><a href="#安装nvm" class="headerlink" title="安装nvm"></a>安装nvm</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="regexp">//</span> 首先安装构建工具所需要的依赖</div><div class="line">sudo yum update</div><div class="line">sudo yum groupinstall <span class="string">'Development Tools'</span></div><div class="line"></div><div class="line"><span class="regexp">//</span> 安装nvm</div><div class="line"></div><div class="line">curl方式：</div><div class="line"></div><div class="line">curl -o-https:<span class="regexp">//</span>raw.githubusercontent.com<span class="regexp">/creationix/</span>nvm<span class="regexp">/v0.33.1/i</span>nstall.sh| bash</div><div class="line"></div><div class="line">wget方式：</div><div class="line"></div><div class="line">wget -qO- https:<span class="regexp">//</span>raw.githubusercontent.com<span class="regexp">/creationix/</span>nvm<span class="regexp">/v0.33.1/i</span>nstall.sh | bash</div><div class="line"></div><div class="line">⚠️ 安装完毕还是找不到nvm情况下执行以下命令</div><div class="line">source ~<span class="regexp">/.bashrc</span></div></pre></td></tr></table></figure>
<h3 id="安装node、npm"><a href="#安装node、npm" class="headerlink" title="安装node、npm"></a>安装node、npm</h3><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">// 查看<span class="keyword">node</span><span class="title">版本</span></div><div class="line">nvm ls-remote</div><div class="line">// 安装相应的版本</div><div class="line">nvm install <span class="keyword">node</span> <span class="title">&lt;版本号&gt;</span></div></pre></td></tr></table></figure>

      
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/build/">build</a>
    </div>


      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-浏览器高度和宽度" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2018/03/22/浏览器高度和宽度/" class="article-date">
      <time datetime="2018-03-22T08:53:37.000Z" itemprop="datePublished">2018-03-22</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/03/22/浏览器高度和宽度/">浏览器宽度和高度</a>
    </h1>
  

      </header>
      
    
    
    <div class="article-entry" itemprop="articleBody"  style="display: none">
    
      
          
        <h3 id="innerWidth-outerWidth"><a href="#innerWidth-outerWidth" class="headerlink" title="innerWidth outerWidth"></a>innerWidth outerWidth</h3><ul>
<li>innerWidth: 在移动端是整个视图的大小，而不是布局大小，布局大小 = 视图大小 - 顶部大小(wifi\时间那个头部)</li>
<li>outerWidth: 有兼容性问题，尽量少用，outerWidth在部分浏览器中是整个窗口的大小，而在chrome是视图大小</li>
</ul>
<h3 id="获取浏览器视口大小"><a href="#获取浏览器视口大小" class="headerlink" title="获取浏览器视口大小"></a>获取浏览器视口大小</h3><ul>
<li>在pc端document.documentElement是viewport视图，在移动端是布局视口（相当于去掉顶部的wifi、时间那个头部）<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">getViewportSize()&#123;</div><div class="line">    <span class="keyword">var</span> pageWidth = <span class="built_in">window</span>.innerWidth,</div><div class="line">    pageHeight = <span class="built_in">window</span>.innerHeight;</div><div class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> pageWidth != <span class="string">"number"</span>)&#123;</div><div class="line">        <span class="keyword">if</span> (<span class="built_in">document</span>.compatMode == <span class="string">"CSS1Compat"</span>)&#123;</div><div class="line">            pageWidth = <span class="built_in">document</span>.documentElement.clientWidth;</div><div class="line">            pageHeight = <span class="built_in">document</span>.documentElement.clientHeight;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">else</span> &#123;</div><div class="line">            pageWidth = <span class="built_in">document</span>.body.clientWidth;</div><div class="line">            pageHeight = <span class="built_in">document</span>.body.clientHeight;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="客户区大小"><a href="#客户区大小" class="headerlink" title="客户区大小"></a>客户区大小</h3><ul>
<li>clientWidth: 元素内容区宽度 + 左右内边距宽度</li>
<li>clientHeight: 元素内容区高度 + 上下内边距高度<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">function getElementWidth()&#123;</div><div class="line">    let w</div><div class="line">    <span class="keyword">if</span>(document<span class="selector-class">.compatMode</span> == <span class="string">"CSS1Compat"</span>)&#123;</div><div class="line">        w = document<span class="selector-class">.documentElement</span><span class="selector-class">.clientWidth</span></div><div class="line">    &#125;</div><div class="line">    <span class="keyword">else</span>&#123;</div><div class="line">        w = document<span class="selector-class">.body</span><span class="selector-class">.clientWidth</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">function getElementHeight()&#123;</div><div class="line">    let h</div><div class="line">    <span class="keyword">if</span>(document<span class="selector-class">.compatMode</span> == <span class="string">"CSS1Compat"</span>)&#123;</div><div class="line">        h = document<span class="selector-class">.documentElement</span><span class="selector-class">.clientHieht</span></div><div class="line">    &#125;</div><div class="line">    <span class="keyword">else</span>&#123;</div><div class="line">        h = document<span class="selector-class">.body</span><span class="selector-class">.clientHieht</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="获取网页内容高度或宽度"><a href="#获取网页内容高度或宽度" class="headerlink" title="获取网页内容高度或宽度"></a>获取网页内容高度或宽度</h3><ul>
<li>scrollWidth: 元素内容的总宽度</li>
<li>scrollHeight: 元素内容的总高度</li>
<li>scrollLeft: 被隐藏在内容区域左侧的像素数， 可以改变这个属性达到改变元素的滚动位置</li>
<li>scrollTop: 被隐藏在内容区域上方的像素数，可以改变这个属性达到改变元素的滚动位置<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">function getDocumentWidth()&#123;</div><div class="line">    let w</div><div class="line">    <span class="keyword">if</span>(document<span class="selector-class">.compatMode</span> == <span class="string">"CSS1Compat"</span>)&#123;</div><div class="line">        w = Math.max(document<span class="selector-class">.documentElement</span><span class="selector-class">.scrollWidth</span>, document<span class="selector-class">.documentElement</span><span class="selector-class">.clientWidth</span>)</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">else</span>&#123;</div><div class="line">        w = Math.max(document<span class="selector-class">.body</span><span class="selector-class">.scrollWidth</span>, document<span class="selector-class">.body</span><span class="selector-class">.clientWidth</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">function getDocumentHeight()&#123;</div><div class="line">    let h</div><div class="line">    <span class="keyword">if</span>(document<span class="selector-class">.compatMode</span> == <span class="string">"CSS1Compat"</span>)&#123;</div><div class="line">        h = Math.max(document<span class="selector-class">.documentElement</span><span class="selector-class">.scrollHeight</span>, document<span class="selector-class">.documentElement</span><span class="selector-class">.clientHieht</span>)</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">else</span>&#123;</div><div class="line">        h = Math.max(document<span class="selector-class">.body</span><span class="selector-class">.scrollHeight</span>, document<span class="selector-class">.body</span><span class="selector-class">.clientHieht</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="判断元素在页面中相对于视口的位置"><a href="#判断元素在页面中相对于视口的位置" class="headerlink" title="判断元素在页面中相对于视口的位置"></a>判断元素在页面中相对于视口的位置</h3><figure class="highlight qml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getBoundingClientRect</span>(<span class="params">element</span>)</span>&#123;</div><div class="line">    <span class="built_in">var</span> scrollTop = <span class="built_in">document</span>.documentElement.scrollTop;</div><div class="line">    <span class="built_in">var</span> scrollLeft = <span class="built_in">document</span>.documentElement.scrollLeft;</div><div class="line">    </div><div class="line">    <span class="keyword">if</span>(element.getBoundingClientRect)&#123;</div><div class="line">        <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="built_in">arguments</span>.callee.offset != <span class="string">"number"</span>)&#123;</div><div class="line">            <span class="built_in">var</span> scrollTop = <span class="built_in">document</span>.documentElement.scrollTop;</div><div class="line">            <span class="built_in">var</span> temp = <span class="built_in">document</span>.createElement(<span class="string">"div"</span>);</div><div class="line">            temp.style.cssText = <span class="string">"position:absolute;left:0;top:0;"</span>; <span class="built_in">document</span>.body.appendChild(temp);</div><div class="line">            <span class="built_in">arguments</span>.callee.offset = -temp.getBoundingClientRect().top - scrollTop;</div><div class="line">            <span class="built_in">document</span>.body.removeChild(temp);</div><div class="line">            temp = <span class="literal">null</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="built_in">var</span> <span class="built_in">rect</span> = element.getBoundingClientRect();</div><div class="line">        <span class="built_in">var</span> offset = <span class="built_in">arguments</span>.callee.offset;</div><div class="line">        <span class="keyword">return</span> &#123;</div><div class="line">            <span class="attribute">left</span>: <span class="built_in">rect</span>.left + offset,</div><div class="line">            <span class="attribute">right</span>: <span class="built_in">rect</span>.right + offset,</div><div class="line">            <span class="attribute">top</span>: <span class="built_in">rect</span>.top + offset,</div><div class="line">            <span class="attribute">bottom</span>: <span class="built_in">rect</span>.bottom + offset</div><div class="line">        &#125;;</div><div class="line">    &#125;</div><div class="line">    <span class="title">else</span>&#123;</div><div class="line">        <span class="built_in">var</span> actualLeft = getElementLeft(element);</div><div class="line">        <span class="built_in">var</span> actualTop = getElementTop(element);</div><div class="line">        <span class="keyword">return</span> &#123;</div><div class="line">            <span class="attribute">left</span>: actualLeft - scrollLeft,</div><div class="line">            <span class="attribute">right</span>: actualLeft + element.offsetWidth - scrollLeft,</div><div class="line">            <span class="attribute">top</span>: actualTop - scrollTop,</div><div class="line">            <span class="attribute">bottom</span>: actualTop + element.offsetHeight - scrollTop</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="获取网页可见区域的宽度或高度"><a href="#获取网页可见区域的宽度或高度" class="headerlink" title="获取网页可见区域的宽度或高度"></a>获取网页可见区域的宽度或高度</h3><ul>
<li>offsetWidth = scrollWidth + 左右滚动条 + 左右边框</li>
<li>offsetHeihgt = scrollHeight + 上下滚动条 + 上下边框</li>
</ul>
<h3 id="获取元素相对父元素的位置"><a href="#获取元素相对父元素的位置" class="headerlink" title="获取元素相对父元素的位置"></a>获取元素相对父元素的位置</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">var</span> l = box<span class="selector-class">.offsetLeft</span></div><div class="line"></div><div class="line"><span class="selector-tag">var</span> t = box<span class="selector-class">.offsetTop</span></div><div class="line"></div><div class="line"><span class="selector-tag">var</span> parent = box<span class="selector-class">.offsetParent</span> <span class="comment">// 返回父元素</span></div></pre></td></tr></table></figure>
<h3 id="获取元素到body或者html的距离"><a href="#获取元素到body或者html的距离" class="headerlink" title="获取元素到body或者html的距离"></a>获取元素到body或者html的距离</h3><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getElementLeft</span><span class="params">(element)</span></span>&#123;</div><div class="line">    <span class="keyword">var</span> actualLeft = element.offsetLeft;</div><div class="line">    <span class="keyword">var</span> current = element.offsetParent;</div><div class="line">    <span class="keyword">while</span> (current !== <span class="literal">null</span>)&#123;</div><div class="line">        actualLeft += current.offsetLeft;</div><div class="line">        current = current.offsetParent;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> actualLeft;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getElementTop</span><span class="params">(element)</span></span>&#123;</div><div class="line">    <span class="keyword">var</span> actualTop = element.offsetTop;</div><div class="line">    <span class="keyword">var</span> current = element.offsetParent;</div><div class="line">    <span class="keyword">while</span> (current !== <span class="literal">null</span>)&#123;</div><div class="line">        actualTop += current. offsetTop;</div><div class="line">        current = current.offsetParent;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> actualTop;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

      
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/other/">other</a>
    </div>


      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-js 数组、字符串常用方法" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/11/14/js 数组、字符串常用方法/" class="article-date">
      <time datetime="2017-11-14T10:09:13.000Z" itemprop="datePublished">2017-11-14</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/11/14/js 数组、字符串常用方法/">js数组、字符串常用方法</a>
    </h1>
  

      </header>
      
    
    
    <div class="article-entry" itemprop="articleBody"  style="display: none">
    
      
          
        <h3 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h3><h4 id="push-原数组尾部增加内容，会改变原数组"><a href="#push-原数组尾部增加内容，会改变原数组" class="headerlink" title="push: 原数组尾部增加内容，会改变原数组"></a>push: 原数组尾部增加内容，会改变原数组</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</div><div class="line">arr.push(<span class="number">4</span>)  </div><div class="line"><span class="built_in">console</span>.log(arr)<span class="comment">// arr [1, 2, 3, 4]</span></div></pre></td></tr></table></figure>
<h4 id="pop-原数组尾部删除一个元素，会改变原数组"><a href="#pop-原数组尾部删除一个元素，会改变原数组" class="headerlink" title="pop: 原数组尾部删除一个元素，会改变原数组"></a>pop: 原数组尾部删除一个元素，会改变原数组</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</div><div class="line">arr.pop() </div><div class="line"><span class="built_in">console</span>.log(arr)<span class="comment">// arr [1, 2, 3, 4]</span></div></pre></td></tr></table></figure>
<h4 id="unshift-数组开头增加内容，会改变原数组"><a href="#unshift-数组开头增加内容，会改变原数组" class="headerlink" title="unshift: 数组开头增加内容，会改变原数组"></a>unshift: 数组开头增加内容，会改变原数组</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</div><div class="line">arr.unshift(<span class="number">4</span>)  </div><div class="line"><span class="built_in">console</span>.log(arr)<span class="comment">// arr [4, 1, 2, 3]</span></div></pre></td></tr></table></figure>
<h4 id="shift-数组开头删除内容，会改变原数组"><a href="#shift-数组开头删除内容，会改变原数组" class="headerlink" title="shift: 数组开头删除内容，会改变原数组"></a>shift: 数组开头删除内容，会改变原数组</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</div><div class="line">arr.shift()  </div><div class="line"><span class="built_in">console</span>.log(arr)<span class="comment">// arr [2, 3]</span></div></pre></td></tr></table></figure>
<h4 id="splice-x-y-z-从x索引开始清除长度为y，并用z替换，改变原来的数组"><a href="#splice-x-y-z-从x索引开始清除长度为y，并用z替换，改变原来的数组" class="headerlink" title="splice(x,y,z): 从x索引开始清除长度为y，并用z替换，改变原来的数组"></a>splice(x,y,z): 从x索引开始清除长度为y，并用z替换，改变原来的数组</h4><p>— 详解<br>—- 删除时，两个参数，第一个是开始位置，第二个是删除长度。<br>—- 插入时，三个参数，第一个是插入位置（在之前插入），第二个是0，第三个是插入的内容。<br>—- 替换时，三个参数，第一个是开始位置，第二个是删除长度，第三个是替换的内容<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</div><div class="line">arr.join(<span class="string">''</span>) <span class="comment">// 123</span></div><div class="line"><span class="built_in">console</span>.log(arr)<span class="comment">// arr [1, 2, 3]</span></div></pre></td></tr></table></figure></p>
<h4 id="reverse-将原数组倒置排序，改变原来的数组"><a href="#reverse-将原数组倒置排序，改变原来的数组" class="headerlink" title="reverse: 将原数组倒置排序，改变原来的数组"></a>reverse: 将原数组倒置排序，改变原来的数组</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</div><div class="line">arr.reverse()</div><div class="line"><span class="built_in">console</span>.log(arr)<span class="comment">// arr [3, 2, 1]</span></div></pre></td></tr></table></figure>
<h4 id="toString-数组转化成字符串，不改变原来的数组"><a href="#toString-数组转化成字符串，不改变原来的数组" class="headerlink" title="toString: 数组转化成字符串，不改变原来的数组"></a>toString: 数组转化成字符串，不改变原来的数组</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</div><div class="line">arr.toString()   <span class="comment">// 1,2,3</span></div><div class="line"><span class="built_in">console</span>.log(arr)<span class="comment">// arr [1, 2, 3]</span></div></pre></td></tr></table></figure>
<h4 id="concat-拼接数组，不改变原来的数组"><a href="#concat-拼接数组，不改变原来的数组" class="headerlink" title="concat: 拼接数组，不改变原来的数组"></a>concat: 拼接数组，不改变原来的数组</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</div><div class="line">arr.concat(<span class="number">4</span>) <span class="comment">// [1, 2, 3, 4]</span></div><div class="line"><span class="built_in">console</span>.log(arr)<span class="comment">// arr [1, 2, 3]</span></div></pre></td></tr></table></figure>
<h4 id="join-分隔符，每一项都用分隔符分开，不改变原来的数组"><a href="#join-分隔符，每一项都用分隔符分开，不改变原来的数组" class="headerlink" title="join: 分隔符，每一项都用分隔符分开，不改变原来的数组"></a>join: 分隔符，每一项都用分隔符分开，不改变原来的数组</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</div><div class="line">arr.join(<span class="string">''</span>) <span class="comment">// 123</span></div><div class="line"><span class="built_in">console</span>.log(arr)<span class="comment">// arr [1, 2, 3]</span></div></pre></td></tr></table></figure>
<h3 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h3><h4 id="charAt-返回字符串给定的位置"><a href="#charAt-返回字符串给定的位置" class="headerlink" title="charAt: 返回字符串给定的位置"></a>charAt: 返回字符串给定的位置</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> arr = <span class="string">'abcdf'</span></div><div class="line"><span class="built_in">console</span>.log(arr.charAt(<span class="number">2</span>)) <span class="comment">// c</span></div></pre></td></tr></table></figure>
<h4 id="concat-拼接2个字符串，-不改变原来的字符串"><a href="#concat-拼接2个字符串，-不改变原来的字符串" class="headerlink" title="concat: 拼接2个字符串， 不改变原来的字符串"></a>concat: 拼接2个字符串， 不改变原来的字符串</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> arr = <span class="string">'abc'</span></div><div class="line">arr.concat(<span class="string">'def'</span>) <span class="comment">// 'abcdef'</span></div><div class="line">arr <span class="comment">// ‘abc’</span></div></pre></td></tr></table></figure>
<h4 id="substring-x，y-返回从x到y-1的字符串"><a href="#substring-x，y-返回从x到y-1的字符串" class="headerlink" title="substring(x，y): 返回从x到y-1的字符串"></a>substring(x，y): 返回从x到y-1的字符串</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> arr = <span class="string">'abcdefg'</span></div><div class="line">arr.substring(<span class="number">0</span>, <span class="number">3</span>) <span class="comment">// ‘abc’</span></div></pre></td></tr></table></figure>
<h4 id="trim-去除两端的空格，-不改变原来的字符串串"><a href="#trim-去除两端的空格，-不改变原来的字符串串" class="headerlink" title="trim(): 去除两端的空格， 不改变原来的字符串串"></a>trim(): 去除两端的空格， 不改变原来的字符串串</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> arr = <span class="string">'  abcdefg     '</span>;</div><div class="line">arr.trim() <span class="comment">// ‘abcdefg’</span></div></pre></td></tr></table></figure>
<h4 id="toLowerCase，-toUpperCase-转换大小写，-不改变原来的字符串串"><a href="#toLowerCase，-toUpperCase-转换大小写，-不改变原来的字符串串" class="headerlink" title="toLowerCase， toUpperCase: 转换大小写， 不改变原来的字符串串"></a>toLowerCase， toUpperCase: 转换大小写， 不改变原来的字符串串</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> arr = <span class="string">'Abcdefg'</span></div><div class="line">arr.toUpperCase() <span class="comment">// 'abcdefg'</span></div></pre></td></tr></table></figure>
<h4 id="indexOf-lastIndexOf-确定索引位置"><a href="#indexOf-lastIndexOf-确定索引位置" class="headerlink" title="indexOf, lastIndexOf: 确定索引位置"></a>indexOf, lastIndexOf: 确定索引位置</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> arr = <span class="string">'Abcdefg'</span></div><div class="line">arr.toUpperCase() <span class="comment">// 'abcdefg'</span></div></pre></td></tr></table></figure>
<h4 id="split-将字符串转换为数组"><a href="#split-将字符串转换为数组" class="headerlink" title="split: 将字符串转换为数组"></a>split: 将字符串转换为数组</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> arr = <span class="string">'abcdefg'</span></div><div class="line">arr.split(<span class="string">''</span>) <span class="comment">// ["a", "b", "c", "d", "e", "f", "g"]</span></div></pre></td></tr></table></figure>

      
      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-extend" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/10/13/extend/" class="article-date">
      <time datetime="2017-10-13T02:53:37.000Z" itemprop="datePublished">2017-10-13</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/10/13/extend/">extend 深度复制</a>
    </h1>
  

      </header>
      
    
    
    <div class="article-entry" itemprop="articleBody"  style="display: none">
    
      
          
        <figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> hasOwn = <span class="built_in">Object</span>.prototype.hasOwnProperty</div><div class="line"></div><div class="line"><span class="keyword">let</span> toString = <span class="built_in">Object</span>.prototype.toString</div><div class="line"></div><div class="line"><span class="keyword">let</span> class2type = &#123;&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> type = <span class="function"><span class="keyword">function</span> (<span class="params">obj</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> obj === <span class="literal">null</span> ? <span class="built_in">String</span>(obj) : class2type[ toString.call(obj) ] || <span class="string">'object'</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> isWindow = <span class="function"><span class="keyword">function</span> (<span class="params">obj</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> obj &amp;&amp; <span class="keyword">typeof</span> obj === <span class="string">'object'</span> &amp;&amp; <span class="string">'setInterval'</span> <span class="keyword">in</span> obj</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * 判断是否是纯对象</div><div class="line"> */</div><div class="line"><span class="keyword">let</span> isPlainObject = <span class="function"><span class="keyword">function</span> (<span class="params">obj</span>) </span>&#123;</div><div class="line">  <span class="keyword">if</span> (!obj || type(obj) !== <span class="string">'object'</span> || obj.nodeType || isWindow(obj)) &#123;</div><div class="line">    <span class="keyword">return</span> <span class="literal">false</span></div><div class="line">  &#125;</div><div class="line">  <span class="keyword">if</span> (obj.constructor &amp;&amp; !hasOwn.call(obj, <span class="string">'constructor'</span>) &amp;&amp; !hasOwn.call(obj.constructor.prototype, <span class="string">'isPrototypeOf'</span>)) &#123;</div><div class="line">    <span class="keyword">return</span> <span class="literal">false</span></div><div class="line">  &#125;</div><div class="line">  <span class="keyword">var</span> key</div><div class="line">  <span class="keyword">for</span> (key <span class="keyword">in</span> obj) &#123;&#125;</div><div class="line">  <span class="keyword">return</span> key === <span class="literal">undefined</span> || hasOwn.call(obj, key)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * 判断是否是纯函数</div><div class="line"> */</div><div class="line"><span class="keyword">let</span> isFunction = <span class="function"><span class="keyword">function</span> (<span class="params">obj</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> type(obj) === <span class="string">'function'</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * 判断是否是纯数组</div><div class="line"> */</div><div class="line"><span class="keyword">let</span> isArray = <span class="built_in">Array</span>.isArray || <span class="function"><span class="keyword">function</span> (<span class="params">obj</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> type(obj) === <span class="string">'array'</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * 对象的深copy</div><div class="line"> * 参数1： 布尔值 可以省略 判断是否深度拷贝，默认false</div><div class="line"> * example extend(false, &#123;a: &#123;name: '张三'&#125;&#125;, &#123;b: &#123;name: '李四'&#125;&#125;)</div><div class="line"> */</div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">extend</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">let</span> options</div><div class="line">  <span class="keyword">let</span> name</div><div class="line">  <span class="keyword">let</span> src</div><div class="line">  <span class="keyword">let</span> copy</div><div class="line">  <span class="keyword">let</span> copyIsArray</div><div class="line">  <span class="keyword">let</span> clone</div><div class="line">  <span class="keyword">let</span> target = <span class="built_in">arguments</span>[<span class="number">0</span>] || &#123;&#125;</div><div class="line">  <span class="keyword">let</span> i = <span class="number">1</span></div><div class="line">  <span class="keyword">let</span> length = <span class="built_in">arguments</span>.length</div><div class="line">  <span class="keyword">let</span> deep = <span class="literal">false</span></div><div class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> target === <span class="string">'boolean'</span>) &#123;</div><div class="line">    deep = target</div><div class="line">    target = <span class="built_in">arguments</span>[<span class="number">1</span>] || &#123;&#125;</div><div class="line">    i = <span class="number">2</span></div><div class="line">  &#125;</div><div class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> target !== <span class="string">'object'</span> &amp;&amp; !isFunction(target)) &#123;</div><div class="line">    target = &#123;&#125;</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">if</span> (length === i) &#123;</div><div class="line">    target = <span class="keyword">this</span></div><div class="line">    --i</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">for</span> (; i &lt; length; i++) &#123;</div><div class="line">    <span class="keyword">if</span> ((options = <span class="built_in">arguments</span>[ i ]) !== <span class="literal">null</span>) &#123;</div><div class="line">      <span class="keyword">for</span> (name <span class="keyword">in</span> options) &#123;</div><div class="line">        src = target[name]</div><div class="line">        copy = options[name]</div><div class="line">        <span class="keyword">if</span> (target === copy) &#123;</div><div class="line">          <span class="keyword">continue</span></div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span> (deep &amp;&amp; copy &amp;&amp; (isPlainObject(copy) || (copyIsArray = isArray(copy)))) &#123;</div><div class="line">          <span class="keyword">if</span> (copyIsArray) &#123;</div><div class="line">            copyIsArray = <span class="literal">false</span></div><div class="line">            clone = src &amp;&amp; isArray(src) ? src : []</div><div class="line">          &#125; <span class="keyword">else</span> &#123;</div><div class="line">            clone = src &amp;&amp; isPlainObject(src) ? src : &#123;&#125;</div><div class="line">          &#125;</div><div class="line">          target[name] = extend(deep, clone, copy)</div><div class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (copy !== <span class="literal">undefined</span>) &#123;</div><div class="line">          target[name] = copy</div><div class="line">        &#125;</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> target</div><div class="line">&#125;</div></pre></td></tr></table></figure>
      
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/javascript/">javascript</a>
    </div>


      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-webpack &amp; gulp" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/06/29/webpack & gulp/" class="article-date">
      <time datetime="2017-06-29T01:20:37.000Z" itemprop="datePublished">2017-06-29</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/06/29/webpack & gulp/">webpack &amp; gulp制作脚手架</a>
    </h1>
  

      </header>
      
    
    
    <div class="article-entry" itemprop="articleBody"  style="display: none">
    
      
          
        <h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;前段时间学react、vue写了一些demo,为了方便调试每次都要复制一大推文件来支持热加载。然后文件就变得很多，最后连自己都搞不清楚每个demo的作用，基于此决定写一个脚手架。目前该项目已传至npm，地址为<a href="https://www.npmjs.com/package/npm-scaff" target="_blank" rel="external">https://www.npmjs.com/package/npm-scaff</a></p>
<h3 id="开发的脚手架要解决的问题"><a href="#开发的脚手架要解决的问题" class="headerlink" title="开发的脚手架要解决的问题"></a>开发的脚手架要解决的问题</h3><ul>
<li>支持多个框架</li>
<li>配置文件可以通过命令自动生成，不需要每次手动复制</li>
<li>配置文件只需要一份，可以调试多个页面</li>
<li>可以进行热加载</li>
<li>可以打包</li>
</ul>
<h3 id="如何解决以上问题"><a href="#如何解决以上问题" class="headerlink" title="如何解决以上问题"></a>如何解决以上问题</h3><ul>
<li>其实不同框架本质都一样，都有一个入口文件，vue和react可以对这个文件进行进一步包装，比如vue，我就用在index.js里面render了App.vue这个单页面，这样开发的时候入口就是App.vue这个文件，react也是同理</li>
<li>通过tj大神的commander可以用js去写一些命令</li>
<li>只需要动态改变webpack中entry和output的路径就能调试多个页面</li>
<li>可以通过webpack-dev-server这个插件</li>
<li>webpack只做2件事情，一个是模块的依赖，二是js的压缩，其他任务都交给gulp去做。</li>
</ul>
<h3 id="选择开发工具"><a href="#选择开发工具" class="headerlink" title="选择开发工具"></a>选择开发工具</h3><ul>
<li>commander tj大神开发的工具，可以用js去配置命令行参数</li>
<li>webpack webpack的优势是在分析各个模块之间的关系。</li>
<li>gulp gulp的优势就是任务流，速度快，任务可以自定义，结构清晰。光用webpack只能进行一些简单的配置以及模块的依赖，但是还有很多事情做不了，比如雪碧图的制作等，而且webpack的配置很复杂，api一直在变动，所以决定引入gulp，让webpack仅仅是作为gulp的一个子任务，用gulp去管理整体任务就会比较清晰了。</li>
</ul>
<h3 id="开发流程"><a href="#开发流程" class="headerlink" title="开发流程"></a>开发流程</h3><ul>
<li>首先在本地创建一套基于webpack + gulp的前端开发脚手架。</li>
<li>其次将这些文件全部放到包里面，一起上传到npm，这样用户执行npm install -g npm-scaff的时候就能把这些脚手架的文件都下载放到本地全局</li>
<li>当用户执行pm init的时候其实就是把刚才安装在本地全局的那些脚手架文件从全局复制到新建的项目里面，同理pm add也是一样</li>
</ul>
<h3 id="webpack-gulp配置过程中的注意事项"><a href="#webpack-gulp配置过程中的注意事项" class="headerlink" title="webpack + gulp配置过程中的注意事项"></a>webpack + gulp配置过程中的注意事项</h3><ul>
<li>配置多个页面其实本质就是动态改变webpack里面entry、ouput的配置，可以通过首先通过readdirSync读取当前目录下面的文件，然后进行了一次for循环，再把每个值传递给那个webpack配置里面entry和output。</li>
<li>要区分环境，可以通过webpack.DefinePlugin去定义一个全局变量，但是这边因为结合了gulp所以就不需要去特定定义这个变量了</li>
<li>open-browser-webpack-plugin 通过这个插件可以唤起浏览器</li>
<li>extract-text-webpack-plugin 这个插件在热更新的时候不能用，因为它会把css文件单独独立出来，这样修改css内容的时候就不会热更新了</li>
<li>热更新的时候需要添加HotModuleReplacementPlugin这个插件</li>
<li>热更新的时候需要在配置中添加 devtool:’eval-source-map’生成source map 方便调试。</li>
<li><p>webpack-dev-server其实就是起了一个express服务，文件入口路径在<code>webpack-dev-server/client?http://localhost:8080</code>,所以要把这个放到entry里面，热更新还需要把’webpack/hot/dev-server’也放进去entry里面，同时在output里面配置输出路径(publishPath)，publishPath是提供给webpack-dev-server里面的publishPath。</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">entry</span>: &#123;</div><div class="line">     <span class="attribute">index</span>: [</div><div class="line">       path.resolve(__dirname, <span class="built_in">`../src/$&#123;dir&#125;/index.js`</span>),</div><div class="line">       <span class="built_in">`webpack-dev-server/client?http://localhost:$&#123;port&#125;`</span>,</div><div class="line">       <span class="string">'webpack/hot/dev-server'</span></div><div class="line">     ]</div><div class="line">   &#125;</div><div class="line"><span class="attribute">output</span>: &#123;</div><div class="line">     <span class="attribute">filename</span>: <span class="string">"[name].js"</span>,</div><div class="line">     <span class="attribute">path</span>: path.resolve(__dirname, <span class="string">'../build/'</span>),</div><div class="line">     <span class="attribute">publicPath</span>: <span class="built_in">`http://localhost:$&#123;port&#125;/$&#123;dir&#125;/`</span></div><div class="line">   &#125;</div></pre></td></tr></table></figure>
</li>
<li><p>webpack-dev-server有2种方式进行配置，一个是命令行，直接在命令行后面添加–inline -hot，然后在配置里面配置devServer这个对象（和module，plugins同级），还有一种是通过node去配置，具体如下</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//webpackconfig为基础配置，devConfig(dir, port)为热更新配置</span></div><div class="line"><span class="keyword">let</span> optionConfig = merge(webpackconfig, devConfig(dir, port));</div><div class="line">    <span class="keyword">const</span> myDevConfig = <span class="built_in">Object</span>.create(optionConfig);</div><div class="line">    <span class="keyword">new</span> webpackDevServer(webpack(myDevConfig), &#123;</div><div class="line">      <span class="attr">stats</span>: &#123;</div><div class="line">        <span class="attr">colors</span>: <span class="literal">true</span></div><div class="line">      &#125;,</div><div class="line">      <span class="attr">publicPath</span>: devConfig(dir, port).output.publicPath,</div><div class="line">      <span class="attr">historyApiFallback</span>: <span class="literal">true</span>,</div><div class="line">      <span class="attr">hot</span>: <span class="literal">true</span>,</div><div class="line">      <span class="attr">watchOptions</span>: &#123;</div><div class="line">        <span class="attr">poll</span>: <span class="literal">true</span>,</div><div class="line">        <span class="attr">watch</span>: <span class="literal">true</span></div><div class="line">      &#125;,</div><div class="line">      <span class="attr">watchContentBase</span>: <span class="literal">true</span></div><div class="line">    &#125;).listen(port, <span class="string">"localhost"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">err</span>) </span>&#123;</div><div class="line">      <span class="keyword">if</span>(err) <span class="keyword">throw</span> <span class="keyword">new</span> gutil.PluginError(<span class="string">"webpack-dev-server"</span>, err);</div><div class="line">      gutil.log(<span class="string">"[webpack-dev-server]"</span>, <span class="string">`http://localhost:<span class="subst">$&#123;port&#125;</span>/webpack-dev-server/index.html`</span>);</div><div class="line">    &#125;);</div></pre></td></tr></table></figure>
<h3 id="结束"><a href="#结束" class="headerlink" title="结束"></a>结束</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;使用文档已经写在npm里面的npm-scaff这个模块上了，可以自行阅览。目前暂不支持图片、字体以及mock数据，之后会补充，如有bug请及时联系我修复</p>

      
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/build/">build</a>
    </div>


      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-redux基础" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/04/14/redux基础/" class="article-date">
      <time datetime="2017-04-14T07:14:13.000Z" itemprop="datePublished">2017-04-14</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/04/14/redux基础/">redux基础</a>
    </h1>
  

      </header>
      
    
    
    <div class="article-entry" itemprop="articleBody"  style="display: none">
    
      
          
        <h3 id="基本概念和API"><a href="#基本概念和API" class="headerlink" title="基本概念和API"></a>基本概念和API</h3><p>1 . store: 保存数据的地方，可以把它当作一个容器，整个应用只能有一个store，Redux提供了createStore函数来生成store。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; createStore &#125; <span class="keyword">from</span> <span class="string">'redux'</span>;</div><div class="line"><span class="keyword">const</span> store = createStore(fn);</div></pre></td></tr></table></figure>
<p>2 . state: store对象包含了所有数据，如果想要得到某个时点的数据，就要对store生成快照。这个时点的数据集合就叫做 state，当前时刻的state可以通过store.getState()拿到。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> state = store.getState();</div><div class="line"><span class="comment">//Redux规定：1个state对应一个view，只要state相同，view就相同，你知道了state就相当于知道了view是怎么样的了</span></div></pre></td></tr></table></figure>
<p>3 . Action: 会导致view的变化，但是用户接触不到state，只能接触到view，所以state的变化必须是view导致的。action就是view发出通知，表示state应该发生变化了。Action是一个对象。其中的type属性是必须的，表示Action的名称，其他属性可以自由设置，比如</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> action = &#123;</div><div class="line">    <span class="attr">type</span>: <span class="string">'ADD_TODO'</span>,</div><div class="line">    <span class="attr">playload</span>: <span class="string">'Learn Redux'</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>4 . Action Creator:  View层有多少种消息，就会有多少种Action，可以用一个函数来生成Action，这个函数就是Action Creator</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> ADD_TODO = <span class="string">'添加 TODO'</span>;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">addTodo</span>(<span class="params">text</span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">        <span class="attr">type</span>: ADD_TODO,</div><div class="line">        text</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> action = addTodo(<span class="string">"learn Redux"</span>);</div></pre></td></tr></table></figure>
<p>5 . store.dispatch: 是view发出Action的唯一方法。中间件就是在这个阶段使用<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">impot &#123; createStore &#125; <span class="keyword">from</span> <span class="string">'redux'</span>;</div><div class="line"><span class="keyword">const</span> store = createStore(fn);</div><div class="line">store.dispatch(&#123;</div><div class="line">    <span class="attr">type</span>: <span class="string">"ADD_TODO"</span>,</div><div class="line">    <span class="attr">payload</span>: <span class="string">"learn Redux"</span></div><div class="line">&#125;)</div></pre></td></tr></table></figure></p>
<p>6 . reducer: store接受到Action以后，必须给出一个新的state，这样view才能发生变化，这种state的计算过程就叫做Reducer，它是一个纯函数，接受Action和当前state作为参数，返回一个新的state</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> renucer = <span class="function"><span class="keyword">function</span>(<span class="params">state,action</span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> new_state;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//案例</span></div><div class="line"><span class="keyword">const</span> defaultState = <span class="number">0</span>;</div><div class="line"><span class="keyword">const</span> reducer = <span class="function">(<span class="params">state = defaultState,action</span>) =&gt;</span> &#123;</div><div class="line">    <span class="keyword">switch</span> (action.type)&#123;</div><div class="line">        <span class="attr">case</span>: <span class="string">'ADD'</span></div><div class="line">            <span class="keyword">return</span> state + action.payload;</div><div class="line">        <span class="keyword">default</span>:</div><div class="line">            <span class="keyword">return</span> state;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> state = redicer(<span class="number">1</span>,&#123;</div><div class="line">    <span class="attr">type</span>: <span class="string">'ADD'</span>,</div><div class="line">    <span class="attr">payload</span>: <span class="number">2</span></div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>7 . store.subscript(callback) 这个方法用于设置监听函数，一旦state发生变化，就会自动执行这个函数，只要是view的更新函数（react项目就是render或者setState方法放入listen），就能实现view层的 自动渲染。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> unsubscript = store.subscribe(<span class="function"><span class="params">()</span> =&gt;</span> </div><div class="line">    <span class="built_in">console</span>.log(store.getState());</div><div class="line">)</div></pre></td></tr></table></figure>
<p>unsubscript();</p>
<p>8 . mapStateToProps:这个方法就是把接受到的state转换为props,一般只用第一个参数state</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> mapStateToProps = <span class="function">(<span class="params">state</span>) =&gt;</span> &#123;</div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">        <span class="attr">value</span>: state.xx</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>9 . mapDispatchToProps:这个是把接受到的动作转换为props</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> mapDispatchToProps = <span class="function">(<span class="params">dispatch</span>) =&gt;</span> &#123;</div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">        <span class="attr">onReast</span>: <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">            <span class="comment">//一堆自己要写的逻辑</span></div><div class="line">            dispatch(action)</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>store的方法</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">store.getState();</div><div class="line">store.dispatch();</div><div class="line">store.subscribe();</div></pre></td></tr></table></figure>
<p>redux提供了combineReducers方法，用于reducer的拆分。</p>
<h3 id="坑点："><a href="#坑点：" class="headerlink" title="坑点："></a>坑点：</h3><p>1.如果用combineReducers的时候一定要注意要同步修改reducer里面的switch里面的内容，要不然会造成访问不到。</p>
<p>2.自定义mapDispatchToProps的时候注意return的时候一定要带回dispatch，要不然this.props里面就找不到dispatch了<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> mapDispatchToProps=<span class="function">(<span class="params">dispatch</span>)=&gt;</span>&#123;</div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">        <span class="attr">onAdd</span>:<span class="function"><span class="params">()</span>=&gt;</span>&#123;</div><div class="line">            <span class="built_in">console</span>.log(<span class="string">"1"</span>);</div><div class="line">            dispatch(action);</div><div class="line">        &#125;,</div><div class="line">        dispatch</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="完整的案例："><a href="#完整的案例：" class="headerlink" title="完整的案例："></a>完整的案例：</h3><p><a href="https://github.com/mcfly001/my-redux/tree/master" target="_blank" rel="external">https://github.com/mcfly001/my-redux/tree/master</a></p>

      
      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-react基本用法" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/04/11/react基本用法/" class="article-date">
      <time datetime="2017-04-11T02:04:48.000Z" itemprop="datePublished">2017-04-11</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/04/11/react基本用法/">react基本用法</a>
    </h1>
  

      </header>
      
    
    
    <div class="article-entry" itemprop="articleBody"  style="display: none">
    
      
          
        <h3 id="生命周期"><a href="#生命周期" class="headerlink" title="生命周期"></a>生命周期</h3><p><img src="/image/react/react-life.png" alt="result"><br><img src="/image/react/react-life2.png" alt="result"><br>getDefaultProps:对于每一个<em>组件</em>，这个方法只会被调用一次,可以在componentWillMount时候调用this.props.xx获取<br>Mounting:已插入真实的Dom<br>Updating:正在被重新渲染<br>Unmounting:已移除真实Dom</p>
<p>componentWillMount:被插入真实dom之前,对<em>组件实例<em>来说这个方法调用有且只有一次会被调用<br>render:创建一个虚拟dom，用来组件输出<br>componentDidMount:被插入真实dom之后<br>componentWillUpdate(object nextprops,object nextstate):更新之前<br>componentDidUpdate(object nextprops,object nextstate):更新之后<br>componentWillUnmount:移除之前</em></em></p>
<p>componentWillReceiveProps(object nextprops):在组件接收到一个新的prop时被调用。<br>shouldComponentUpdate(object nextprops,object nextstate):组件判断是否重新渲染时调用</p>
<h4 id="装载组件触发"><a href="#装载组件触发" class="headerlink" title="装载组件触发"></a>装载组件触发</h4><p>getDefaultProps：组件首次初始化实例的时候会被执行，第二次初始化实例的时候不会被执行。<br>getInitialState：每一次实例化的时候都会执行一次,调用的是状态<br>componentWillMount:只会在装载之前调用一次，这里还可以改变state的值<br>render：生成jsx，生成虚拟dom，只能访问this.props和this.state，不允许改变状态和dom输出<br>componentDidMount:只存在于客户端，不存在服务器上。只会在new的时候调用一次，该阶段dom已经在页面上了，可以通过ReactDom.findDOMNode(this)，获取到页面的Dom节点。</p>
<h4 id="更新组件触发"><a href="#更新组件触发" class="headerlink" title="更新组件触发"></a>更新组件触发</h4><p>componentWillReceiveProps(object nextprops):组件将要接受到属性的时候调用，属性来自于父组件<br>shouldComponentUpdate(object nextprops,object nextstate):判断props和state是否相等，如果不想等就返回true，相等就返回false，false就不需要更新<br>componentWillUpdate(object nextprops,object nextstate)<br>render:<br>componentDidUpdate(object nextprops,object nextstate)</p>
<h4 id="卸载组件触发"><a href="#卸载组件触发" class="headerlink" title="卸载组件触发"></a>卸载组件触发</h4><p>componentWillUnmount:组件销毁之前调用的函数</p>
<h3 id="特殊点"><a href="#特殊点" class="headerlink" title="特殊点"></a>特殊点</h3><ol>
<li>自定义的react类名称是以大写字母开头。</li>
</ol>
<h3 id="render函数"><a href="#render函数" class="headerlink" title="render函数"></a>render函数</h3><p>一共有3个参数:<br>第一个参数：nextElement<br>第二个参数：container<br>第三个参数：callback</p>
<h3 id="哪些组件应该有state？"><a href="#哪些组件应该有state？" class="headerlink" title="哪些组件应该有state？"></a>哪些组件应该有state？</h3><p>大部分组件的工作应该是从Props中获取数据并且渲染出来，只有对于一些例如input输入，服务器请求或者时间变化等作出响应等才需要使用state，尽可能把组件无状态化。</p>
<h3 id="哪些不应该作为state"><a href="#哪些不应该作为state" class="headerlink" title="哪些不应该作为state"></a>哪些不应该作为state</h3><p>1.计算所得数据<br>2.React组件<br>3.基于props的重复数据</p>
<h3 id="Prop验证"><a href="#Prop验证" class="headerlink" title="Prop验证"></a>Prop验证</h3><p>React.ProTypes提供了很多验证器验证传入数据的有效性，为了性能方面的考虑，只在开发环境验证PropType</p>
<h3 id="react组件Api"><a href="#react组件Api" class="headerlink" title="react组件Api"></a>react组件Api</h3><p>1.设置状态：setState<br>&emsp;setState会触发一次组件重绘，除非shouldComponentUpdate设置为false<br>    setState(object nextstate,callback)<br>2.替换状态：replaceState<br>&emsp;replaceState()方法与setState()类似，但是方法只会保留nextState中状态，原state不在nextState中的状态都会被删除。也就是假设之前有多个state的值，但是如果这些state值中某个值不在本次replace中，那么这个值就会被抛弃。<br>    replaceState(object nextState[, function callback])<br>3.设置属性：setProps<br>&emsp;从父组件到子组件，当外部集成时候需要向组件传递数据或通知React.render()组件重新渲染。<br>    setProps(object nextProps[, function callback])<br>4.替换属性：replaceProps<br>&emsp;<br>    replaceProps(object nextProps[, function callback])<br>5.强制更新：forceUpdate<br>6.获取DOM节点：findDOMNode<br>如果组件已经挂载到dom上，该方法返回对应的本地浏览器dom元素。<br>    this.findDOMNode(this.refs.xx)<br>7.判断组件挂载状态：isMounted</p>
<pre><code>bool isMounted //返回true或者false
</code></pre><h3 id="如果父组件和子组件getDefaultProps里面同时设定了同一个属性"><a href="#如果父组件和子组件getDefaultProps里面同时设定了同一个属性" class="headerlink" title="如果父组件和子组件getDefaultProps里面同时设定了同一个属性"></a>如果父组件和子组件getDefaultProps里面同时设定了同一个属性</h3><p>如果父组件和子组件的getDefaultProps共有一个属性，那么会取父组件里面该属性的值。</p>
<h3 id="如果有mixin就会先执行mixin里面的方法，然后才会执行组件内的方法"><a href="#如果有mixin就会先执行mixin里面的方法，然后才会执行组件内的方法" class="headerlink" title="如果有mixin就会先执行mixin里面的方法，然后才会执行组件内的方法"></a>如果有mixin就会先执行mixin里面的方法，然后才会执行组件内的方法</h3><h3 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h3><ol>
<li>input 一定要添加 ／</li>
<li>Input里面建议使用defaultValue，如果使用了value，但是没有添加onChange事件输入框里面的内容就不能被改变<br>3.React.addons.LInkedStateMixin    可以用来链接状态<figure class="highlight pf"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">getInitialState()&#123;</div><div class="line">  Return &#123;</div><div class="line">        message:’react is very good’</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">render()&#123;</div><div class="line">    <span class="variable">&lt;input type=“text” valueLink=&#123;this.linkState(“message”)&#125; /&gt;</span></div><div class="line">    <span class="variable">&lt;span&gt;</span>&#123;this.<span class="keyword">state</span>.message&#125;&lt;/span&gt;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ol>
<p>4 React.unmountComponentAtNode( document.getElementById(“app”) );//从组件中清除已经挂载的React组件。</p>

      
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/JAVASCRIPT/">JAVASCRIPT</a>
    </div>


      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-nodejs用例" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/04/11/nodejs用例/" class="article-date">
      <time datetime="2017-04-11T01:41:35.000Z" itemprop="datePublished">2017-04-11</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/04/11/nodejs用例/">nodejs用例</a>
    </h1>
  

      </header>
      
    
    
    <div class="article-entry" itemprop="articleBody"  style="display: none">
    
      
          
        <h3 id="用例1"><a href="#用例1" class="headerlink" title="用例1"></a>用例1</h3><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">const http=require('http');</div><div class="line">const hostname='127.0.0.1';</div><div class="line">const port=3000;</div><div class="line">const obj=&#123;</div><div class="line">  name:"张三"</div><div class="line">&#125;</div><div class="line">const server=http.creatServer((req,res)=&gt;&#123;</div><div class="line">    res.statusCode=200;</div><div class="line">    res.setHeader("Content-Type",'text/plain;'text/plain; charset=utf-8');</div><div class="line">    res.end(obj.name);</div><div class="line">&#125;)</div><div class="line">server.listen(port,hostname,()=&gt;&#123;</div><div class="line">    console.log(`服务器运行在 http://$&#123;hostname&#125;:$&#123;port&#125;/`);</div><div class="line">&#125;)</div></pre></td></tr></table></figure>

      
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/JAVASCRIPT/">JAVASCRIPT</a>
    </div>


      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-es6" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/04/10/es6/" class="article-date">
      <time datetime="2017-04-10T01:00:37.000Z" itemprop="datePublished">2017-04-10</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/04/10/es6/">Es6基础</a>
    </h1>
  

      </header>
      
    
    
    <div class="article-entry" itemprop="articleBody"  style="display: none">
    
      
          
        <h2 id="let和const"><a href="#let和const" class="headerlink" title="let和const"></a><font size="6">let和const</font></h2><h3 id="let"><a href="#let" class="headerlink" title="let"></a>let</h3><p>1 . let 命令<br>&emsp;<font size="2.5">1.1 let和var2个用法类似，但是申明的变量只在let命令所在的代码块有效</font><br>&emsp;<font size="2.5">1.2 let在for循环里面是一个局部变量，不存在变量提升。但是这里有一个例外就是函数，如果声明的是函数还是会变量提升的。</font><br>&emsp;<font size="2.5">1.3 只要块级作用域存在let，它申明的变量就绑定这个区域，不受外面的影响。如果在申明之前使用就会报错，<br>语法上将这就是”暂时性死区”。这样设计就是让大家养成习惯，变量一定要在声明后使用参考案例3</font><br>&emsp;<font size="2.5">1.4 let不允许在相同作用域内，声明同一个变量。</font></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">   <span class="keyword">let</span> a=<span class="number">1</span>;</div><div class="line">   <span class="keyword">var</span> b=<span class="number">2</span>;</div><div class="line">&#125;</div><div class="line">a <span class="comment">// a is not defined;</span></div><div class="line">b <span class="comment">// 2</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> a=[];</div><div class="line"><span class="keyword">var</span> b=[];</div><div class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++)&#123;</div><div class="line">   a[i]=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">       <span class="built_in">console</span>.log(i);</div><div class="line">   &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++)&#123;</div><div class="line">  b[i]=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">      <span class="built_in">console</span>.log(i);</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line">a[<span class="number">6</span>]() <span class="comment">//10</span></div><div class="line">b[<span class="number">6</span>]() <span class="comment">//6</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> tmp = <span class="number">123</span>;</div><div class="line"><span class="keyword">if</span> (<span class="literal">true</span>) &#123;</div><div class="line">  <span class="built_in">console</span>.log(tmp)</div><div class="line">  <span class="comment">/*let tmp;*/</span>  <span class="comment">//如果这里不注释，上一条语句就会报错。</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> tmp = <span class="number">123</span>;</div><div class="line"><span class="keyword">let</span> tmp = <span class="number">2</span>   <span class="comment">//报错</span></div></pre></td></tr></table></figure>
<p>2 . 块级作用域<br>&emsp;<font size="2.5">2.1 Es5里面只有全局作用域和函数作用域，没有块级作用域，会导致错误比如内层变量会覆盖外层变量</font><br>&emsp;<font size="2.5">2.2 会造成内存泄露，比如for循环里面i声明之后就一直存在于内存中，不会被销毁，造成泄露。</font><br>&emsp;<font size="2.5">2.3 es5规定行数只能在顶级作用域和函数作用域中声明，不能在块级作用域下声明，但是es6，可以在块级作用域下声明变量，但是类似于let，在该作用域外不可引用。这个规则在浏览器外适用，但是浏览器可以不遵循这个规则</font><br>&emsp;<font size="2.5">2.4 es6允许在块级作用域内声明函数，函数声明类似于var，会被提升到全局作用域或者函数作用域的头部，同时函数声明也会被提升到所在块级作用域的头部</font><br>&emsp;<font size="2.5">2.5 一般情况下块级作用域是没有返回值的，现在有议案，是在块级作用域之前加上do，使它变成do表达式，这样块级作用域就可以有返回值了。</font></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> tmp = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(tmp);</div><div class="line">  <span class="keyword">if</span> (<span class="literal">false</span>) &#123;</div><div class="line">    <span class="keyword">var</span> tmp = <span class="string">'hello world'</span>;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line">f(); <span class="comment">// undefined  f()函数相当于先var tmp变量提升了。</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">f1</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">let</span> n = <span class="number">5</span>;</div><div class="line">  <span class="keyword">if</span> (<span class="literal">true</span>) &#123;</div><div class="line">    <span class="keyword">let</span> n = <span class="number">10</span>;</div><div class="line">  &#125;</div><div class="line">  <span class="built_in">console</span>.log(n); <span class="comment">// 5</span></div><div class="line">&#125;</div><div class="line"><span class="comment">//如果把let改成var结果就是10；因为这是同一个作用域即函数作用域</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> a=<span class="number">1</span>;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> a = <span class="number">5</span>;</div><div class="line">&#125;</div><div class="line">f();</div><div class="line">a <span class="comment">//1 这里a的值没变化的原因因为是2个作用域，一个是全局，一个是函数</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span>(<span class="literal">true</span>)&#123;</div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>)</span>&#123;</div><div class="line">  </div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"><span class="comment">//错误，es5中不能在块级作用域下声明函数，但是实际还是能够运行的。</span></div></pre></td></tr></table></figure>
<h3 id="const"><a href="#const" class="headerlink" title="const"></a>const</h3><p>1 . 基本用法<br>&emsp;<font size="2.5">1.1 声明一个只读的常量，一旦声明，这个值就不能被改变。</font><br>&emsp;<font size="2.5">1.2 const声明的时候必需要赋值，不赋值就会报错。</font><br>&emsp;<font size="2.5">1.3 const和let一样声明的常量不能提升，同样存在暂时性死区，只能在声明的位置后面使用。</font><br>&emsp;<font size="2.5">1.4 const声明的是常量的时候，值在栈里面，固定不变了，但是如果是引用类型的，变量是一个内存地址，const只能保证指针是固定的，至于它指向的数据结构就不能控制了。</font><br>&emsp;<font size="2.5">1.5 如果想要冻结对象，可以使用Object.freeze,这样就不能对对象赋值了。</font><br>&emsp;<font size="2.5">1.6 声明变量一共有6种形式，var function let const class import</font><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> Pi=<span class="number">3.1415</span>;</div><div class="line">Pi <span class="comment">//3.1415</span></div><div class="line">Pi=<span class="number">4</span>; <span class="comment">//报错</span></div></pre></td></tr></table></figure></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (<span class="literal">true</span>) &#123;</div><div class="line">  <span class="built_in">console</span>.log(MAX); <span class="comment">// ReferenceError 因为不存在提升</span></div><div class="line">  <span class="keyword">const</span> MAX = <span class="number">5</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> foo = &#123;&#125;;</div><div class="line">foo.prop = <span class="number">123</span>; <span class="comment">// 为 foo 添加一个属性，可以成功</span></div><div class="line">foo.prop <span class="comment">// 123</span></div><div class="line"><span class="comment">// 将 foo 指向另一个对象，就会报错</span></div><div class="line">foo = &#123;&#125;; <span class="comment">// TypeError: "foo" is read-only</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> foo = <span class="built_in">Object</span>.freeze(&#123;&#125;);</div><div class="line">foo.prop = <span class="number">123</span>;</div><div class="line">foo <span class="comment">//&#123;&#125;,被冻结了</span></div></pre></td></tr></table></figure>
<h3 id="顶级对象的属性和全局对象-global和window"><a href="#顶级对象的属性和全局对象-global和window" class="headerlink" title="顶级对象的属性和全局对象 global和window"></a>顶级对象的属性和全局对象 global和window</h3><p>&emsp;<font size="2.5">1.1 Es5顶层对象的属性和全局变量是等价的，Es6开始var和function命令声明的全局变量依然是顶层对象的属性，但是let、const、class声明的全局变量不属于顶层对象的属性</font><br>&emsp;<font size="2.5">1.2 在浏览器中顶层对象是window，而node、web work的顶层对象是global，浏览器和web worker中self指向顶层对象，但是node没有self。</font><br>&emsp;<font size="2.5">1.3 函数里面的this，如果是单纯当作函数运行，this指向的是顶层对象，但是在严格模式下this返回的是undefined</font><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> a=<span class="number">1</span>;</div><div class="line"><span class="built_in">window</span>.a <span class="comment">//1</span></div><div class="line"><span class="keyword">let</span> b=<span class="number">1</span>;</div><div class="line"><span class="built_in">window</span>.b <span class="comment">//undefined</span></div></pre></td></tr></table></figure></p>
<h2 id="变量的解构赋值"><a href="#变量的解构赋值" class="headerlink" title="变量的解构赋值"></a><font size="6">变量的解构赋值</font></h2><p>箭头函数this指向不一样，es5如果在函数内部写函数的情况下，内部的函数中this指向的是window或者undefined，但是es6中this指向的是外面的那个函数。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> obj = &#123;</div><div class="line">    <span class="attr">birth</span>: <span class="number">1990</span>,</div><div class="line">    <span class="attr">getAge</span>: <span class="function"><span class="keyword">function</span> (<span class="params">year</span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> b = <span class="keyword">this</span>.birth; <span class="comment">// 1990</span></div><div class="line">        <span class="keyword">var</span> fn = <span class="function">(<span class="params">y</span>) =&gt;</span> &#123;</div><div class="line">          <span class="keyword">return</span> y - <span class="keyword">this</span>.birth; </div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> fn.call(&#123;<span class="attr">birth</span>:<span class="number">2000</span>&#125;, year);</div><div class="line">    &#125;</div><div class="line">  &#125;;</div><div class="line">  <span class="built_in">console</span>.log(obj.getAge(<span class="number">2015</span>)); <span class="comment">// 25*/</span></div></pre></td></tr></table></figure></p>
<p>方法写在constructor里面和外面的区别<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Father</span> </span>&#123;</div><div class="line">  speak()&#123;</div><div class="line">    alert(<span class="string">"a"</span>)</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Father2</span> </span>&#123;</div><div class="line">  <span class="keyword">constructor</span>()&#123;</div><div class="line">    <span class="keyword">this</span>.speak=<span class="function"><span class="params">()</span>=&gt;</span>&#123;</div><div class="line">      alert(<span class="string">"b"</span>)</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//区别就是如果写在constructor就相当于写在构造器里面，如果不写在constructor就相当于写在类的原型上面。</span></div></pre></td></tr></table></figure></p>

      
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/JAVASCRIPT/">JAVASCRIPT</a>
    </div>


      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
  
    <nav id="page-nav">
      <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
    </nav>
  
</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                &copy; 2018 店小二不二
            </div>
        </div>
        
    </div>
</footer>

    </div>
    <script src="https://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>
<script src="/js/main.js"></script>

    <script>
        $(document).ready(function() {
            var backgroundnum = 24;
            var backgroundimg = "url(/background/bg.jpg)";
            $("#mobile-nav").css({"background-image": backgroundimg,"background-size": "cover","background-position": "center"});
            $(".left-col").css({"background-image": backgroundimg,"background-size": "cover","background-position": "center"});
        })
    </script>





<div class="scroll" id="scroll">
    <a href="#"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments"><i class="fa fa-comments-o"></i></a>
    <a href="#footer"><i class="fa fa-arrow-down"></i></a>
</div>
<script>
    $(document).ready(function() {
        if ($("#comments").length < 1) {
            $("#scroll > a:nth-child(2)").hide();
        };
    })
</script>

<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>


  </div>
</body>
</html>